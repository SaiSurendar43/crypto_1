"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[90279],{562559:(e,t,a)=>{a.d(t,{Z:()=>v});var i=a(667294),s=a(293041),l=a(883119),r=a(112690),o=a(391254),n=a(773285),c=a(780280),d=a(19121),h=a(969315),p=a(179888),_=a(965900),u=a(539766),f=a(785893);function m(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let y=(e,t)=>typeof e!=typeof t||(Array.isArray(t)?e.length!==t.length||t.some((t,a)=>!Array.isArray(e)||t.type!==e[a].type||t.src!==e[a].src):t!==e),g=(e,t)=>t?e.replace("v1.pinimg.com","control"===t?"v3.pinimg.com":"v2.pinimg.com"):e,P=(e,t)=>e[0].src&&t?[{...e[0],src:g(e[0].src,t)}]:e,b=(e,t)=>"string"==typeof e?g(e,t):Array.isArray(e)?P(e,t):e;class S extends i.PureComponent{constructor(...e){super(...e),m(this,"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:p.Cy.DEFAULT,videoStartTime:this.props.seekTime||0}),m(this,"errorRetryCount",1),m(this,"firstFragBuffered",!1),m(this,"hasPlaybackStarted",!1),m(this,"hasVideoSessionStarted",!1),m(this,"hasVideoSessionEnded",!1),m(this,"hls",null),m(this,"fragStartupTime",{}),m(this,"lastLevelSwitchKbps",null),m(this,"lastStallTime",null),m(this,"lastPauseTime",null),m(this,"logSessionStartOnNextPlay",!1),m(this,"playerId",""),m(this,"videoSessionId",""),m(this,"videoVisibleTime",null),m(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof this.props.src?g(this.props.src,this.props.quicExpGroup):g(this.props.src[0].src,this.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0,videoCreatedTime:null}),m(this,"initializeHls",()=>{this.destroyHls();let{src:e,hlsConfig:t,quicExpGroup:a}=this.props,i=new s.ZP(t),l=b(e,a);i.loadSource(l),this.videoPlayerRef&&i.attachMedia(this.videoPlayerRef.video),i.on(s.ZP.Events.FRAG_BUFFERED,this.handleHlsFragBuffered),i.on(s.ZP.Events.FRAG_CHANGED,this.handleHlsFragChanged),i.on(s.ZP.Events.FRAG_LOADING,this.handleHlsFragLoading),i.on(s.ZP.Events.FRAG_LOADED,this.handleHlsFragLoaded),i.on(s.ZP.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0})}),i.on(s.ZP.Events.LEVEL_SWITCHED,this.handleHlsLevelSwitched),i.on(s.ZP.Events.ERROR,this.handleHlsError),this.hls=i}),m(this,"destroyHls",()=>{let{hls:e}=this;e&&e.destroy()}),m(this,"addSegment",e=>{let{segments:t}=this.playbackPerformance,a=t&&t[t.length-1];if(this.hls&&t.length&&a&&a.uri!==e.url){this.updateWatchDurationForCurrentSegment();let a=this.videoPlayerRef&&this.videoPlayerRef.video,i=this.hls&&this.hls.levels||{},s="number"==typeof e.level?i[e.level]:{},l=this.fragStartupTime[e.url],r=-1;l&&l.startLoadTime&&l.endLoadTime&&(r=l.endLoadTime-l.startLoadTime);let o={indicatedKbps:s.bitrate/p.bR,duration:e.duration,level:e.level,lastStartPlayTime:this.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:this.hls&&this.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:e.sn,sourceWidth:s.width,sourceHeight:s.height,startupTimeMs:r,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:a&&a.clientWidth||-1,viewportHeight:a&&a.clientHeight||-1,watchedDurationMs:0};t.push(o)}}),m(this,"initializeSegments",e=>{let{contextLogData:t={}}=this.props,{is_closeup_video:a=!1}=t,{segments:i}=this.playbackPerformance;if(!i.length){if(!this.hls||!this.videoPlayerRef||!this.videoPlayerRef.video||!e){(0,h.tE)("initializeSegmentsFailed",!0,a);return}if(!i.length&&"number"==typeof e.level){let t=this.videoPlayerRef&&this.videoPlayerRef.video,{levels:a}=this.hls,s="number"==typeof e.level?a[e.level]:{},l=this.fragStartupTime[e.url],r=-1;l&&l.startLoadTime&&l.endLoadTime&&(r=l.endLoadTime-l.startLoadTime),this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/p.bR;let o={indicatedKbps:s.bitrate/p.bR,duration:e.duration,level:e.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:this.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:null,serverAddress:"",sn:e.sn,sourceWidth:s.width,sourceHeight:s.height,startupTimeMs:r,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:t.clientWidth,viewportHeight:t.clientHeight,watchedDurationMs:0};i.push(o)}}}),m(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*p.gJ:null),m(this,"handleCanPlayVideo",e=>{let{contextLogData:t={},onReady:a,playing:i}=this.props,{is_closeup_video:s=!1}=t,{canPlayVideo:l}=this.state;(0,h.tE)("handleCanPlayVideo",!0,s,{firstCanPlayEvent:!l,playing:i}),this.playbackPerformance.hasFatalError=!1,l||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),a&&a(e)}),m(this,"handleEnded",e=>{let{loop:t,onEnded:a}=this.props,{segments:i}=this.playbackPerformance,s=i&&i[i.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),s&&(s.lastStartPlayTime=0),this.fragStartupTime={}):t||this.logPlaybackPerformance(p.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:p.Cy.ENDED}),a&&a(e)}),m(this,"handleHlsError",(e,t)=>{let{contextLogData:a={}}=this.props,{is_closeup_video:i=!1}=a;if(this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${t.details}`,t.fatal){this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.errorName=t.type,this.playbackPerformance.errorReason=t.details,this.playbackPerformance.errorCode=t.response&&t.response.code?t.response.code:0;let e={errorName:t.type,errorReason:t.details,errorRetryCount:this.errorRetryCount,errorMessage:t.err?.message?.slice(0,50)||"unknown",errorResponse:t.response?.text?.slice(0,50)||"unknown",playbackState:this.state.playbackState};if((0,h.tE)("fatalError",!0,i,e),this.errorRetryCount>0)switch(this.errorRetryCount-=1,t.type){case s.ZP.ErrorTypes.NETWORK_ERROR:if(t.details===s.ZP.ErrorDetails.MANIFEST_LOAD_ERROR||t.details===s.ZP.ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details===s.ZP.ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){let{src:e,quicExpGroup:t}=this.props,a=b(e,t);this.hls?.loadSource(a)}else this.hls?.startLoad();break;case s.ZP.ErrorTypes.MEDIA_ERROR:this.hls?.recoverMediaError()}}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:p.Cy.FAILED})}),m(this,"handleHlsFragBuffered",(e,t)=>{this.firstFragBuffered||(this.initializeSegments(t.frag),this.firstFragBuffered=!0)}),m(this,"handleHlsFragChanged",(e,t)=>{this.addSegment(t.frag)}),m(this,"handleHlsFragLoading",(e,t)=>{let a=t.frag?.url;a&&!this.fragStartupTime[a]&&(this.fragStartupTime[a]={startLoadTime:new Date})}),m(this,"handleHlsFragLoaded",(e,t)=>{t.frag&&t.frag.loaded&&(this.playbackPerformance.downloadedKiloBytes+=t.frag.loaded/p.Fm);let a=t.frag?.url;a&&this.fragStartupTime[a]&&this.fragStartupTime[a].startLoadTime&&(this.fragStartupTime[a].endLoadTime=new Date)}),m(this,"handleHlsLevelSwitched",()=>{this.hls&&this.hls.bandwidthEstimate&&(this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/p.bR)}),m(this,"handleLoadedMetadata",()=>{this.setState({playbackState:p.Cy.LOADED_METADATA})}),m(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:p.Cy.LOAD_START})}),m(this,"handleLoadedData",()=>{this.setState({playbackState:p.Cy.LOADED_DATA})}),m(this,"handlePlaying",e=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:p.Cy.PLAYING}),this.props.clearSeekTime&&this.props.clearSeekTime(),this.props.onPlaying&&this.props.onPlaying(e)}),m(this,"handleUserPause",e=>{let{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t(e)}),m(this,"handleVideoPause",()=>{this.state.playbackState===p.Cy.STALLING||this.state.playbackState===p.Cy.SEEKING||(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:p.Cy.PAUSED})}),m(this,"handleSeeking",()=>{this.playbackPerformance.numberOfSeeks+=1;let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==p.Cy.ENDED&&this.setState({playbackState:p.Cy.SEEKING})}),m(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==p.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1),this.setState({playbackState:p.Cy.STALLING})}),m(this,"handleTimeUpdate",e=>{let{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===p.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),m(this,"resetPlaybackMetrics",()=>{this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastLevelSwitchKbps=null,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;let e=this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],t={...e,lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.downloadedKiloBytes=0,this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[t]}),m(this,"setLastSegmentStartPlayTime",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),m(this,"setLastSegmentPlaybackStartDate",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),m(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),m(this,"setVideoPlayerRef",e=>{let{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){let e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),m(this,"updateStallDuration",()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)}),m(this,"updatePauseDuration",()=>{if(null!==this.lastPauseTime){let{lastPauseTime:e}=this;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}}),m(this,"updateWatchDurationForCurrentSegment",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],a=t?t.lastStartPlayTime:null,i=this.getCurrentVideoTime();if(t&&null!==a&&"number"==typeof i&&"number"==typeof a){let e=i-a;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),m(this,"logPlaybackPerformance",(e,t)=>{let{contextLogData:a={},userId:i,isAutoPlay:s,logContextEvent:l,preload:r}=this.props,{is_closeup_video:o=!1}=a,{canPlayTime:n,detailedErrors:c,downloadedKiloBytes:d,errorCode:_,errorName:u,errorReason:f,hasFatalError:m,playbackStartTimestamp:y,totalPauseDurationMs:g,totalStallDurationMs:P,segments:b,srcString:S,loadStartTime:v,numberOfStalls:x,numberOfSeeks:A}=this.playbackPerformance,E=this.videoPlayerRef&&this.videoPlayerRef.video,w=e===p.DR,T=w&&!this.hasVideoSessionStarted,k=!w&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(this.hls&&E&&(T||k)){let T=-1;n&&v&&(T=n>v?n-v:0);let k=-1;n&&this.videoVisibleTime&&(k=n>this.videoVisibleTime?n-this.videoVisibleTime:0),w&&(this.videoSessionId=(0,p.Y7)(i),this.playerId=this.playerId||(0,p.EB)());let z={autoplaying:s,averageVideoKbps:-1,detailedErrors:c,downloadedKiloBytes:d,isCellular:!1,errorCode:_,errorName:u,errorReason:f,fatalError:m,nativeVideoDurationMs:E.duration*p.gJ||-1,numberOfStalls:x,numberOfSeeks:A,overallPausedDurationMs:g,overallBufferDurationMs:P,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:y||-1,segments:[],sessionMark:e,screenPixelScale:window?.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:E.clientWidth,startupPlayerHeight:E.clientHeight,startupTimeMs:T,startupLatencyMs:k,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:E.videoWidth,startupVariantHeight:E.videoHeight,videoUrl:S,wasVideoPreloaded:"auto"===r};if(!w&&b.length){let{levels:e}=this.hls,t=b[0];this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();let a=b.reduce((t,a)=>{if(!a||"number"!=typeof a.level||!e||!(e.length>0))return t;{let i=(e[a.level]||{}).bitrate,s=a.watchedDurationMs;return t+i*(s||0)/p.gJ}},0),i=b.reduce((e,t)=>e+(t.watchedDurationMs||0),0),s=null,l=0,r=0;do l+=b[r].watchedDurationMs,s=s||b[r].level,r+=1;while(r<b.length&&b[r].level===s)z.startupVariantKbps=t.indicatedKbps,z.startupVariantWatchedDurationMs=l,z.startupVariantWidth=t.sourceWidth,z.startupVariantHeight=t.sourceHeight,z.startupPlayerWidth=t.viewportWidth,z.startupPlayerHeight=t.viewportHeight,z.overallWatchedDurationMs=i,i>0?(z.averageVideoKbps=a/(i/p.gJ),z.rebufferRate=this.playbackPerformance.totalStallDurationMs/i):0===i&&(z.averageVideoKbps=-1,z.rebufferRate=-1,z.errorName="invalid_watch_duration"),z.segments=b}else z.errorName="invalid_watch_duration";(0,h.ZP)(z,!0,o,{playbackState:this.state.playbackState,...t});let{clientTrackingParams:C,component:H,durationNs:F,element:D,objectId:R,pairId:L,viewData:I,view:j,viewParameter:M,...N}=a;l({aux_data:{...N,is_closeup_video:o,playback_session_id:this.videoSessionId},clientTrackingParams:C,component:H,duration_ns:F,element:D,event_data:{videoPerformanceData:z},event_type:3606,object_id_str:R,pair_id:L,view_data:I,view_parameter:M,view_type:j}),w?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,h.tE)(w?"sessionStart":"sessionEnd",!0,o,{playbackState:this.state.playbackState,...t})}})}componentDidMount(){let{contextLogData:e={},playing:t}=this.props,{is_closeup_video:a=!1}=e;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,h.tE)("videoMounted",!0,a),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(p.DR,{initiator:"mount"}))}componentDidUpdate(e){let{loop:t,playing:a,src:i,visible:s,appInFocus:l,seekTime:r,captionsEnabled:o}=this.props,n=this.videoPlayerRef?.video?.textTracks[0];n&&(o?n.mode="showing":n.mode="disabled",n.addEventListener("cuechange",()=>{let e=n.activeCues&&n.activeCues.length>0&&n.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})),r&&r!==e.seekTime&&this.setState({videoStartTime:r}),y(e.src,i)&&this.initializeHls(),e.appInFocus&&!l&&(this.logPlaybackPerformance(p.$f,{initiator:"update",loop:t}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===s&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"update",loop:t})),!1===e.visible&&!0===s&&(this.videoVisibleTime=this.videoVisibleTime||new Date,a?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),a&&l&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}componentWillUnmount(){let{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"unmount",loop:e}),this.destroyHls()}render(){let{aspectRatio:e,backgroundColor:t,captions:a,controls:i,loop:s,loopOverride:r,objectFit:n,onDurationChange:c,onFullscreenChange:d,onLoadedChange:h,onControlsPlay:p,onPlayheadDown:_,onPlayheadUp:m,onSeek:y,onVolumeChange:g,playbackRate:P,playing:S,playsInline:v,poster:x,preload:A,quicExpGroup:E,src:w,volume:T}=this.props,{canPlayVideo:k,isManifestParsed:z,videoStartTime:C}=this.state,H=b(w,E);return(0,f.jsxs)(l.xu,{children:[(0,f.jsx)(o.Z,{unsafeCSS:u.P}),(0,f.jsx)(l.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,backgroundColor:t,captions:a,controls:i,loop:void 0===r?s:r,objectFit:n,onControlsPause:this.handleUserPause,onControlsPlay:p,onDurationChange:c,onEnded:this.handleEnded,onFullscreenChange:d,onLoadedChange:h,onLoadStart:this.handleLoadStart,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:_,onPlayheadUp:m,onPlaying:this.handlePlaying,onReady:this.handleCanPlayVideo,onSeek:y,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:g,onWaiting:this.handleStalled,playbackRate:P,playing:z&&k&&S,playsInline:v,poster:x,preload:A,src:H,startTime:C,volume:T})]})}}let v=(0,i.memo)(function(e){let{country:t,isAuthenticated:a,isBot:i,isSocialBot:s,unauthId:l,userAgent:o}=(0,c.B)(),p=(0,r.Z)(),u=(0,d.Z)(),{browserName:m,browserVersion:y,isMobile:g}=o,{contextLogData:P={}}=e,{is_closeup_video:b=!1,view:v,viewParameter:x}=P,{checkExperiment:A}=(0,n.F)(),E=null;a&&(E=A("web_video_quic").group.length?A("web_video_quic").group:null);let{appUI:w}=(0,_.I)(),T=A("web_video_fail_to_start_fix").anyEnabled?w.appInFocus:e.appInFocus;return(0,h.r$)({browserName:m,browserVersion:y,country:t,isAuthenticated:a,isBot:i,is_closeup_video:b,isMobile:g,isSocialBot:s,view:v,viewParameter:x}),(0,f.jsx)(S,{...e,appInFocus:T,logContextEvent:p,quicExpGroup:E,userId:u.id||l})})},969315:(e,t,a)=>{a.d(t,{ZP:()=>p,r$:()=>d,tE:()=>h});var i=a(311560),s=a(179888),l=a(67347);let r=["isCellular","videoUrl","sessionMark"],o={},n="",c=e=>e<0?"negative":0===e?"zero":e<200?"xs":e<400?"s":e<600?"m":e<800?"l":e<1e3?"xl":e<1200?"xxl":"over1200",d=e=>{let{browserName:t,browserVersion:a,country:s,isAuthenticated:l,isBot:r,isMobile:c,isSocialBot:d,view:h="unknown",viewParameter:p="unknown"}=e;n=d&&"socialBot"||r&&"bot"||"nonbot";let _=(0,i.Z)(s);o={browserName:t,browserVersion:a?.split(".")[0]||"0",isAuthenticated:l,isMobile:c,region:_,view:h,viewParameter:p}};function h(e,t,a,i={}){let s={...i,...o},r=`web.video.${t?"hls":"nonHls"}.${n}.${a?"closeup":"nonCloseup"}.${e}`;"nonbot"===n&&(0,l.nP)(r,{sampleRate:1,tags:s})}function p(e,t,a,i={}){let d=a?"closeup":"nonCloseup",h=t?"hls":"nonHls",p=e.sessionMark===s.DR?"sessionStart":"sessionEnd",_={...i,...o};if("nonbot"===n&&(Object.entries(e).forEach(([t,a])=>{let i=`web.video.${h}.${n}.${d}.${p}.${t}`,s=parseInt(a,10),o="number"==typeof s?s:-1;if(!r.includes(t)){if(t.includes("fatalError")&&!0===a){let{errorCode:t,errorName:a,errorReason:s}=e;(0,l.nP)(i,{sampleRate:1,tags:{errorCode:t,errorName:a,errorReason:s,..._}})}else if(t.includes("Width")||t.includes("Height")){let e=c(o);(0,l.nP)(i,{sampleRate:1,tags:{dimensionBucket:e,..._}})}else if("numberOfStalls"===t){let e=a;o>1e3?e="over1000":o>10?e="over10":o<0&&(e="negative"),(0,l.nP)(i,{sampleRate:1,tags:{numberOfStalls:e,..._}})}else"screenPixelScale"===t?(0,l.nP)(i,{sampleRate:1,tags:{screenPixelScale:a||-1,..._}}):o>=0?(0===o&&(0,l.nP)(`${i}.zero`,{sampleRate:1,tags:_}),(0,l.LY)(i,o,{sampleRate:1})):o<0&&(0,l.nP)(`${i}.negative`,{sampleRate:1,tags:_})}}),e.sessionMark!==s.DR)){let{rebufferRate:t,screenPixelScale:a,startupLatencyMs:i,startupVariantWidth:s,startupPlayerWidth:r}=e,o=`web.video.${h}.${n}.${d}.${p}`;"number"==typeof s&&"number"==typeof r&&"number"==typeof a&&(0,l.nP)(`${o}.upscaled.${1.5*s>a*r?"good":"bad"}`,{sampleRate:1,tags:_}),"number"==typeof i&&(0,l.nP)(`${o}.startupLatency.${i<500?"good":"bad"}`,{sampleRate:1,tags:_}),"number"==typeof t&&(0,l.nP)(`${o}.rebufferRate.${t<.01?"good":"bad"}`,{sampleRate:1,tags:_})}}},690279:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var i=a(667294),s=a(883119),l=a(81636),r=a(898781),o=a(407043),n=a(865209),c=a(115941),d=a(153551),h=a(737120),p=a(858922),_=a(670829),u=a(215292),f=a(785893);function m({filterId:e,isUpsell:t,onClickApplyFilters:a,query:i,currentlyAppliedFiltersParamTerm:l}){let m=(0,r.ZP)(),{logContextEvent:y}=(0,o.v)(),{displayLabel:g,image:P,term:b}=function(e,t){let a="",i="",s="";switch(e){case 5:a=t._('Protective', 'HairPatternFilters.label.protectiveStyles', 'Hair pattern filter display label for protective styles'),i=h,s="hair_pattern_id:5";break;case 4:a=t._('Coily', 'HairPatternFilters.label.coily', 'Hair pattern filter display label for coily hair'),i=c,s="hair_pattern_id:4";break;case 3:a=t._('Curly', 'HairPatternFilters.label.curly', 'Hair pattern filter display label for curly hair'),i=d,s="hair_pattern_id:3";break;case 2:a=t._('Wavy', 'HairPatternFilters.label.wavy', 'Hair pattern filter display label for wavy hair'),i=_,s="hair_pattern_id:2";break;case 1:a=t._('Straight', 'HairPatternFilters.label.straight', 'Hair pattern filter display label for straight hair'),i=p,s="hair_pattern_id:1";break;case 6:a=t._('Bald/Shaved', 'HairPatternFilters.label.bald', 'Hair pattern filter display label for bald/shaved styles'),i=n,s="hair_pattern_id:6"}return{displayLabel:a,image:i,term:s}}(e,m),S=l===b,v=t?44:56,x=t?72:84;return(0,f.jsxs)(s.kC,{alignItems:"center",direction:"column",gap:{row:0,column:1},width:x+8,children:[(0,f.jsx)(u.q,{children:({hovered:e,onMouseEnter:t,onMouseLeave:r})=>(0,f.jsx)(s.kC,{alignItems:"center",height:v+8,justifyContent:"start",children:(0,f.jsx)(s.iP,{mouseCursor:"pointer",onMouseEnter:t,onMouseLeave:r,onTap:()=>(function(e){let{query:t,onClickApplyFilters:a,currentlyAppliedFiltersParamTerm:i,term:s,logContextEvent:l}=e,r=i===s?"":s;l({event_type:101,component:13864,element:1341,view_type:2,aux_data:{entered_query:t,filter_type:"hair_pattern",value:r}}),a(r)})({onClickApplyFilters:a,query:i,currentlyAppliedFiltersParamTerm:l,term:b,logContextEvent:y}),rounding:"pill",children:(0,f.jsx)(s.xu,{alignItems:"center",color:e?"tertiary":void 0,display:"flex",height:v+8,justifyContent:"center",rounding:"pill",width:x+8,children:(0,f.jsx)(s.xu,{alignItems:"center",color:"default",display:"flex",height:v+4,justifyContent:"center",rounding:"pill",width:x+4,children:(0,f.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:S?"#F7BE72":"#EFEFEF"}},display:"flex",height:v,justifyContent:"center",overflow:"hidden",rounding:"pill",width:x,children:(0,f.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${P})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain"}},height:v-8,width:x-8})})})})})})}),(0,f.jsx)(s.xv,{align:"center",size:"100",weight:"bold",children:g})]},"term")}var y=a(121151),g=a(780280),P=a(562559),b=a(965900);let S="#FFDFE9",v=["US","CA","GB","IE","AU","NZ"];function x({onDismiss:e}){let[t,a]=(0,i.useState)(0),l=(0,r.ZP)(),o=(0,i.useRef)(),{country:n,locale:c}=(0,g.B)(),{appUI:{appInFocus:d}}=(0,b.I)(),h=function(e){let t=e._('Learn how to search by hair pattern', 'HairPatternFiltersEducation.introSection.heading', 'Heading on intro section of educational modal for hair pattern filters');return[{image:{alt:e._('Collage showing several people with different types and styles of hair', 'HairPatternFiltersEducation.introSection.collageImageAltText', 'Alt text for intro image of intro section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/42/7d/d2/427dd2089327cd7b3cc46ddc970c6a52.png"},heading:t,tabName:e._('Intro', 'HairPatternFiltersEducation.introSection.tabName', 'Tab name for intro section of educational modal for hair pattern filters'),textSections:[e._('Our hair pattern search helps narrow down the images you see when exploring hairstyle ideas.', 'HairPatternFiltersEducation.introSection.textParagraph1', 'Text of intro section of educational modal for hair pattern filters'),e._('We use artificial intelligence to detect visual hair patterns in images, which we use to show you more relevant search results.', 'HairPatternFiltersEducation.introSection.textParagraph2', 'Text of intro section of educational modal for hair pattern filters'),e._('Your hair or hairstyle might fall into more than one pattern. Here\'s a guide on some of the key characteristics of each pattern.', 'HairPatternFiltersEducation.introSection.textParagraph3', 'Text of intro section of educational modal for hair pattern filters')]},{icon:{alt:e._('Protective hairstyle icon', 'HairPatternFiltersEducation.protectiveStylesSection.iconAltText', 'Alt text for icon on protective styles section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/cb/a4/d6/cba4d66dc97eec3f1861321f89bb45d6.png"},image:{alt:e._('Collage showing several people with hair in protective styles', 'HairPatternFiltersEducation.protectiveStylesSection.collageImageAltText', 'Alt text for collage image of protective styles section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/cb/27/3f/cb273f30ff826f8390cfb0f5765dfdac.png"},heading:e._('Protective', 'HairPatternFiltersEducation.protectiveStylesSection.heading', 'Heading on protective styles section of educational modal for hair pattern filters'),tabName:e._('Protective', 'HairPatternFiltersEducation.protectiveStylesSection.tabName', 'Tab name for protective styles section of educational modal for hair pattern filters'),textSections:[e._('Can feature grouped strands of hair that are the result of either a natural or manual loccing process, and can vary in density or length.', 'HairPatternFiltersEducation.protectiveStylesSection.textParagraph1', 'Text of protective styles section of educational modal for hair pattern filters'),e._('Can also blend synthetic or human hair extensions into a wide variety of braids and twists.', 'HairPatternFiltersEducation.protectiveStylesSection.textParagraph2', 'Text of protective styles section of educational modal for hair pattern filters')]},{icon:{alt:e._('Coily hair icon', 'HairPatternFiltersEducation.coilySection.iconAltText', 'Alt text for icon on coily hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/73/1e/cd/731ecdc5d25ee427deaec6f3c0346940.png"},image:{alt:e._('Collage showing several people with coily hair', 'HairPatternFiltersEducation.coilySection.collageImageAltText', 'Alt text for collage image of coily hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/fe/b9/be/feb9bed2e846ee89f36f1f805a86bb25.png"},heading:e._('Coily', 'HairPatternFiltersEducation.coilySection.heading', 'Heading on coily hair section of educational modal for hair pattern filters'),tabName:e._('Coily', 'HairPatternFiltersEducation.coilySection.tabName', 'Tab name for coily hair section of educational modal for hair pattern filters'),textSections:[e._('Features spirals, coils or "Z" formations that are densely packed, compact and sometimes springy. Sometimes known as kinky or kinky-coily.', 'HairPatternFiltersEducation.coilySection.textParagraph1', 'Text of coily hair section of educational modal for hair pattern filters'),e._('May resemble strands between 3C and 4C on a hair typing chart, and varies in density and porosity.', 'HairPatternFiltersEducation.coilySection.textParagraph2', 'Text of coily hair section of educational modal for hair pattern filters')]},{image:{alt:e._('Collage showing several people with curly hair', 'HairPatternFiltersEducation.curlySection.collageImageAltText', 'Alt text for collage image of curly hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/c3/8f/f6/c38ff69c0328b9ab125ff6d294cc9a8c.png"},icon:{alt:e._('Curly hair icon', 'HairPatternFiltersEducation.curlySection.iconAltText', 'Alt text for icon on curly hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/ca/98/5f/ca985f851caf56b9da29f770eea1a93a.png"},heading:e._('Curly', 'HairPatternFiltersEducation.curlySection.heading', 'Heading on curly hair section of educational modal for hair pattern filters'),tabName:e._('Curly', 'HairPatternFiltersEducation.curlySection.tabName', 'Tab name for curly hair section of educational modal for hair pattern filters'),textSections:[e._('Features corkscrews, ringlets and spirals that can range from loosely formed to highly defined.', 'HairPatternFiltersEducation.curlySection.textParagraph1', 'Text of curly hair section of educational modal for hair pattern filters'),e._('May resemble strands between 2C and 3C on a hair typing chart, and varies in density and porosity.', 'HairPatternFiltersEducation.curlySection.textParagraph2', 'Text of curly hair section of educational modal for hair pattern filters')]},{icon:{alt:e._('Wavy hair icon', 'HairPatternFiltersEducation.wavySection.iconAltText', 'Alt text for icon on wavy hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/26/df/de/26dfde1fd877acd7b4f7a6c6bf67bb56.png"},image:{alt:e._('Collage showing several people with wavy hair', 'HairPatternFiltersEducation.wavySection.collageImageAltText', 'Alt text for collage image of wavy hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/29/a5/99/29a599ef5f448e3661f330933a178ff6.png"},heading:e._('Wavy', 'HairPatternFiltersEducation.wavySection.heading', 'Heading on wavy hair section of educational modal for hair pattern filters'),tabName:e._('Wavy', 'HairPatternFiltersEducation.wavySection.tabName', 'Tab name for wavy hair section of educational modal for hair pattern filters'),textSections:[e._('Features loose "S" shaped waves that can share properties with both curly or straight hair.', 'HairPatternFiltersEducation.wavySection.textParagraph1', 'Text of wavy hair section of educational modal for hair pattern filters'),e._('May resemble strands between 2A and 2C on a hair typing chart, and varies in density and porosity.', 'HairPatternFiltersEducation.wavySection.textParagraph2', 'Text of wavy hair section of educational modal for hair pattern filters')]},{icon:{alt:e._('Straight hair icon', 'HairPatternFiltersEducation.straightSection.iconAltText', 'Alt text for icon on straight hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/07/a1/05/07a1050761af0e5273cacda2ba51ff65.png"},image:{alt:e._('Collage showing several people with straight hair', 'HairPatternFiltersEducation.straightSection.collageImageAltText', 'Alt text for collage image of straight hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/85/1b/06/851b066049669d3c3d55391c68920a0e.png"},heading:e._('Straight', 'HairPatternFiltersEducation.straightSection.heading', 'Heading on straight hair section of educational modal for hair pattern filters'),tabName:e._('Straight', 'HairPatternFiltersEducation.straightSection.tabName', 'Tab name for straight hair section of educational modal for hair pattern filters'),textSections:[e._('Features consistently straight strands that don\'t vary in shape or curve.', 'HairPatternFiltersEducation.straightSection.textParagraph1', 'Text of straight hair section of educational modal for hair pattern filters'),e._('May resemble strands between 1A and 1C on a hair typing chart, and varies in density and porosity.', 'HairPatternFiltersEducation.straightSection.textParagraph2', 'Text of straight hair section of educational modal for hair pattern filters')]},{icon:{alt:e._('Bald/shaved icon', 'HairPatternFiltersEducation.wavySection.iconAltText', 'Alt text for icon on wavy hair section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/1c/93/74/1c93742bc56de6abf19d5edc0c92192a.png"},image:{alt:e._('Collage showing several people who are bald or have closely shaven hair', 'HairPatternFiltersEducation.baldShavedSection.collageImageAltText', 'Alt text for collage image of bald/shaved section of educational modal for hair pattern filters'),src:"https://i.pinimg.com/originals/8b/be/dc/8bbedc6971190ac70f89b082acfe916b.png"},heading:e._('Bald/Shaved', 'HairPatternFiltersEducation.baldShavedSection.heading', 'Heading on bald/shaved section of educational modal for hair pattern filters'),tabName:e._('Bald/Shaved', 'HairPatternFiltersEducation.baldShavedSection.tabName', 'Tab name for bald/shaved section of educational modal for hair pattern filters'),textSections:[e._('Closely shaved or bald with little to no hair coming out of the scalp. ', 'HairPatternFiltersEducation.baldShavedSection.textParagraph1', 'Text of bald/shaved section of educational modal for hair pattern filters')]}]}(l),p=h.map(e=>({text:e.tabName,href:""})),_=h[t],u=e=>{a(e),e>=p.length-2?o.current?.scrollTo({left:o.current.clientWidth,behavior:"smooth"}):e<=1&&o.current?.scrollTo({left:0,behavior:"smooth"})},m=()=>{t+1<p.length?u(t+1):e()},x=0===t,A=x&&v.includes(n)&&c.startsWith("en");return(0,f.jsx)(y.ZP,{accessibilityModalLabel:l._('Modal explaining how hair pattern search works', 'HairPatternFiltersEducation.modal.accessibilityLabel', 'Accessibility label for hair pattern filters education modal'),onDismiss:e,size:"lg",children:(0,f.jsxs)(s.kC,{alignItems:"stretch",height:521,justifyContent:"start",children:[(0,f.jsx)(s.xu,{alignItems:"center",display:"flex",left:!0,marginStart:5,marginTop:5,position:"absolute",top:!0,zIndex:new s.Ry(2),children:(0,f.jsx)(s.hU,{accessibilityLabel:l._('Close', 'Close button on modal', 'Close button on modal'),bgColor:"transparentDarkGray",icon:"cancel",iconColor:"white",onClick:e,size:"lg"})}),(0,f.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:S}},direction:"column",display:"flex",justifyContent:"end",minWidth:347,overflow:"hidden",children:A?(0,f.jsx)(P.Z,{appInFocus:d,aspectRatio:.6660268714011516,captions:l._('See what happens when you search \'Glam hair\'. See yourself. Hair pattern on Pinterest.', 'HairPatternFiltersEducation.splashVideo.captions', 'Captions for splash video on hair pattern filters education modal'),isAutoPlay:!0,loop:!0,onPlay:()=>{},onPlayError:()=>{},playing:!0,poster:"https://i.pinimg.com/originals/46/d5/5a/46d55a1a4ba77b120eafc0b2ed2fa56a.png",src:"https://v1.pinimg.com/videos/mc/hls/f2/65/8a/f2658acf64a2b08153850f20b3372008.m3u8"}):_.image&&(0,f.jsx)(s.Ee,{alt:_.image.alt,color:S,naturalHeight:521,naturalWidth:347,src:_.image.src})}),(0,f.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",overflow:"hidden",children:[(0,f.jsx)(s.xu,{display:"flex",marginTop:8,overflow:"hidden",children:(0,f.jsxs)(s.xu,{ref:o,display:"flex",marginBottom:-4,overflow:"scrollX",paddingY:2,children:[(0,f.jsx)(s.xu,{paddingX:4}),(0,f.jsx)(s.mQ,{activeTabIndex:t,onChange:({activeTabIndex:e,event:a,dangerouslyDisableOnNavigation:i})=>{i(),a.preventDefault(),e!==t&&u(e)},tabs:p})]})}),(0,f.jsx)(s.xu,{marginEnd:x?10:12,marginTop:5,paddingX:10,paddingY:5,children:(0,f.jsxs)(s.xu,{marginEnd:x?0:12,children:[_.icon&&(0,f.jsx)(s.xu,{height:38,marginBottom:8,width:60,children:(0,f.jsx)(s.Ee,{alt:_.icon.alt,color:"transparent",naturalHeight:38,naturalWidth:60,src:_.icon.src})}),(0,f.jsxs)(s.kC,{direction:"column",gap:{row:0,column:4},children:[(0,f.jsx)(s.xu,{marginEnd:x?8:0,children:(0,f.jsx)(s.X6,{size:"500",children:_.heading})}),_.textSections.map((e,t)=>(0,f.jsx)(s.xv,{children:e},t))]})]})})]}),(0,f.jsx)(s.xu,{bottom:!0,marginBottom:8,marginEnd:8,position:"absolute",right:!0,children:(0,f.jsxs)(s.kC,{gap:{row:2,column:0},justifyContent:"end",children:[!x&&(0,f.jsx)(s.zx,{onClick:()=>{u(t-1)},size:"lg",text:l._('Back', 'HairPatternFiltersEducation.backButton.text', 'Text on button to move to the previous section of hair pattern education modal')}),x?(0,f.jsx)(s.zx,{color:"red",onClick:m,size:"lg",text:l._('Get started', 'HairPatternFiltersEducation.getStartedButton.text', 'Text on button to start tabbing throught the information about hair pattern search')}):(0,f.jsx)(s.zx,{color:"red",onClick:m,size:"lg",text:t===p.length-1?l._('Close', 'HairPatternFiltersEducation.closeButton.text', 'Text on button to close hair pattern education modal'):l._('Next', 'HairPatternFiltersEducation.nextButton.text', 'Text on button to move to next section of hair pattern education modal')})]})})]})})}function A({currentlyAppliedFiltersParamTerm:e,eligibleFilters:t,isUpsell:a,onClickApplyFilters:o,query:n}){(0,l.Q)({component:13864,view_parameter:1341,view_type:2});let c=(0,r.ZP)(),[d,h]=(0,i.useState)(!1),p=e?c._('Some ideas for this hair pattern', 'HairPatternFilters.copy.termSelected', 'Hair pattern filters text when a filter is selected'):c._('Search by hair pattern', 'HairPatternFilters.copy.noTermSelected', 'Hair pattern filters text when no filter is selected');return(0,f.jsxs)(i.Fragment,{children:[(0,f.jsxs)(s.kC,{alignItems:a?"start":"center",direction:"column",gap:{row:0,column:3},children:[!a&&(0,f.jsxs)(s.kC,{alignItems:"center",direction:"row",gap:{row:2,column:0},children:[(0,f.jsx)(s.xv,{color:"default",overflow:"normal",weight:"bold",children:p}),(0,f.jsx)(s.hU,{accessibilityLabel:c._('Learn more', 'HairPatternFilters.infoIconButton', 'Icon button to expand the educational component about hair pattern filters'),icon:"info-circle",iconColor:"darkGray",onClick:()=>{h(!0)},padding:1,size:"lg"})]}),(0,f.jsx)(s.xu,{display:"flex",flex:"none",marginBottom:3,paddingX:a?3:1,children:t.map(t=>(0,f.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{padding:"0 2px"}},"data-test-id":"hairstyle-option",children:(0,f.jsx)(m,{currentlyAppliedFiltersParamTerm:e,filterId:t,isUpsell:a,onClickApplyFilters:o,query:n})},t))})]}),d&&(0,f.jsx)(x,{onDismiss:()=>{h(!1)}})]})}},539766:(e,t,a)=>{a.d(t,{P:()=>_,Z:()=>f});var i=a(667294),s=a(293041),l=a(883119),r=a(366284),o=a(898781),n=a(391254),c=a(780280),d=a(50286),h=a(785893);function p(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let _=`
  video::cue {
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Helvetica, 'ヒラギノ角ゴ Pro W3', 'メイリオ', Meiryo, 'ＭＳ Ｐゴシック', Arial, sans-serif;
    font-weight: 450;
    font-size: 18px;
  }
`;class u extends i.PureComponent{constructor(...e){super(...e),p(this,"state",{videoStartTime:0}),p(this,"setVideoPlayerRef",e=>{let{setVideoRef:t,handlePlay:a,autoplay:i=!0}=this.props;this.videoPlayerRef=e,e&&t&&t(e.video),this.videoPlayerRef&&this.videoPlayerRef.video&&a&&i&&this.videoPlayerRef.video.addEventListener("canplay",()=>{a({userTriggeredPlay:!1})})}),p(this,"hls",null),p(this,"initializeHls",()=>{this.destroyHls();let{src:e}=this.props,t=new s.ZP;s.ZP.isSupported()&&!(0,r.G6)(this.props.requestContext.userAgent.browserName)&&(t.loadSource(e),this.videoPlayerRef&&t.attachMedia(this.videoPlayerRef.video)),this.hls=t}),p(this,"destroyHls",()=>{let{hls:e}=this;e&&e.destroy()}),p(this,"onPlay",({event:e})=>{let{handlePlay:t}=this.props;e.stopPropagation(),t&&t({userTriggeredPlay:!0})}),p(this,"onPause",({event:e})=>{let{handlePause:t}=this.props;e.stopPropagation(),t&&t()}),p(this,"handleVolumeChange",({event:e,volume:t})=>{let{onVolumeChange:a}=this.props;e.stopPropagation(),a&&a({volume:t})}),p(this,"handleOnReady",e=>{this.props.onReady&&this.props.onReady(e)}),p(this,"handleEnded",()=>{let{onEnded:e}=this.props;e&&e()}),p(this,"handlePlaying",()=>{let{clearSeekTime:e}=this.props;e&&e()})}componentDidMount(){this.initializeHls()}componentWillUnmount(){this.destroyHls()}componentDidUpdate(e){let{activeStreamItemIndex:t,playing:a,src:i,seekTime:l,captionsEnabled:r,isDesktop:o,isTablet:n,requestContext:c,isVideoPin:d}=this.props,{isAuthenticated:h}=c;l&&l!==e.seekTime&&this.setState({videoStartTime:l});let p=this.videoPlayerRef?.video?.textTracks[0];p&&(r?p.mode="showing":p.mode="disabled",p.addEventListener("cuechange",()=>{let e=p.activeCues&&p.activeCues.length>0&&p.activeCues[0];e&&e.line&&(o?(e.line=-6,e.size=88):(h?e.line=-8:(e.line=-10,n&&(e.line=-15)),e.size=70),d&&(e.line=-5))})),t!==e.activeStreamItemIndex&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=0),e.src!==i&&(this.initializeHls(),this.hls&&this.hls.on(s.ZP.Events.MANIFEST_PARSED,()=>{void 0!==a&&a&&this.videoPlayerRef&&this.videoPlayerRef.play()}))}render(){let{aspectRatio:e,controls:t,loop:a=!1,poster:i,src:s,onTimeChange:r,playing:o,volume:c,captions:d}=this.props;return(0,h.jsxs)(l.xu,{width:"100%",children:[(0,h.jsx)(n.Z,{unsafeCSS:_}),(0,h.jsx)(l.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,autoplay:o,captions:d,controls:t,loop:a,onControlsPause:this.onPause,onControlsPlay:this.onPlay,onEnded:this.handleEnded,onPlay:()=>{},onPlayError:()=>{},onPlaying:this.handlePlaying,onReady:this.handleOnReady,onTimeChange:r,onVolumeChange:this.handleVolumeChange,playing:o,playsInline:!0,poster:i,src:s,startTime:this.state.videoStartTime||void 0,volume:c})]})}}function f(e){let{clearSeekTime:t,pinId:a="",seekTime:i}=e,s=(0,o.ZP)(),l=(0,c.B)(),r=(0,d.HG)(),n=(0,d.Wb)();return(0,h.jsx)(u,{...e,clearSeekTime:()=>{t&&t(a)},i18n:s,isDesktop:r,isTablet:n,requestContext:l,seekTime:i})}},865209:e=>{e.exports="https://s.pinimg.com/webapp/baldShaved-38ff5ce3.svg"},115941:e=>{e.exports="https://s.pinimg.com/webapp/coily-258ec1c0.svg"},153551:e=>{e.exports="https://s.pinimg.com/webapp/curly-d36b1cce.svg"},737120:e=>{e.exports="https://s.pinimg.com/webapp/protective-8fad3fab.svg"},858922:e=>{e.exports="https://s.pinimg.com/webapp/straight-13b036c6.svg"},670829:e=>{e.exports="https://s.pinimg.com/webapp/wavy-ddd8ad1a.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/90279-6c04429036e3c587.mjs.map